openapi: 3.0.0
info:
  title: Trace4EU endpoints
  version: "1.0"
  description: Endpoints published by Enterprise Wallets for allowing the integration with Trace4EU components. It produces a signed JWT. Only if the verification method of the key is secp256k1, it produces a raw signature in hex format.

paths:
  /trace4eu/v1/signatures:
    post:
      summary: Signature Endpoint
      description: Endpoint for signing payloads
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignatureRequestDto'

      responses:
        '200':
          description: Successful authentication.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SignatureResponseDto'
              examples:
                signed-vc:
                  value:
                    output: 'eyJhbGciOiJFUzI1NksiLCJ0eXAiOiJKV1QiLCJraWQiOiJkaWQ6ZWJzaTp6eGFZYVV0Yjhwdm9BdFlOV2JLY3ZlZyNDSHhZek9xdDM4U3g2WUJmUFloaUVkZ2N3eldrOXR5N2swTEJhNmg3MG5jIn0.eyJqdGkiOiJ1cm46dXVpZDowMDNhMWRkOC1hNWQyLTQyZWYtODE4Mi1lOTIxYzBhOWYyY2QiLCJzdWIiOiJkaWQ6a2V5OnoyZG16RDgxY2dQeDhWa2k3SmJ1dU1tRllyV1BnWW95dHlrVVozZXlxaHQxajlLYnNOZ2V6dEJGWEVCOUZVWkNvdWZUalhpVFVaWUtrY1AzNmkyWEFRQ3BoZnhCd3ZYRzRkQWFGNnBkd2hyTUd5YUxNQzgxZlU1RUNNbnQ0VmdNUXB3aDNzbjV2U2JVcHdvYVRCTUU3OG5vWEphVExna0N2NUtrTTZWZ0dUZldVakg4WjIiLCJpc3MiOiJkaWQ6ZWJzaTp6eGFZYVV0Yjhwdm9BdFlOV2JLY3ZlZyIsIm5iZiI6MTYzNTcyNDgwMCwiZXhwIjoxOTUzNzYzMjAwLCJpYXQiOjE2MzU1NTIwMDAsInZjIjp7IkBjb250ZXh0IjpbImh0dHBzOi8vd3d3LnczLm9yZy8yMDE4L2NyZWRlbnRpYWxzL3YxIl0sImlkIjoidXJuOnV1aWQ6MDAzYTFkZDgtYTVkMi00MmVmLTgxODItZTkyMWMwYTlmMmNkIiwidHlwZSI6WyJWZXJpZmlhYmxlQ3JlZGVudGlhbCIsIlZlcmlmaWFibGVBdHRlc3RhdGlvbiJdLCJpc3N1ZXIiOiJkaWQ6ZWJzaTp6eGFZYVV0Yjhwdm9BdFlOV2JLY3ZlZyIsImlzc3VhbmNlRGF0ZSI6IjIwMjEtMTEtMDFUMDA6MDA6MDBaIiwidmFsaWRGcm9tIjoiMjAyMS0xMS0wMVQwMDowMDowMFoiLCJ2YWxpZFVudGlsIjoiMjA1MC0xMS0wMVQwMDowMDowMFoiLCJleHBpcmF0aW9uRGF0ZSI6IjIwMzEtMTEtMzBUMDA6MDA6MDBaIiwiaXNzdWVkIjoiMjAyMS0xMC0zMFQwMDowMDowMFoiLCJjcmVkZW50aWFsU3ViamVjdCI6eyJpZCI6ImRpZDprZXk6ejJkbXpEODFjZ1B4OFZraTdKYnV1TW1GWXJXUGdZb3l0eWtVWjNleXFodDFqOUtic05nZXp0QkZYRUI5RlVaQ291ZlRqWGlUVVpZS2tjUDM2aTJYQVFDcGhmeEJ3dlhHNGRBYUY2cGR3aHJNR3lhTE1DODFmVTVFQ01udDRWZ01RcHdoM3NuNXZTYlVwd29hVEJNRTc4bm9YSmFUTGdrQ3Y1S2tNNlZnR1RmV1VqSDhaMiJ9LCJjcmVkZW50aWFsU2NoZW1hIjp7ImlkIjoiaHR0cHM6Ly9hcGktcGlsb3QuZWJzaS5ldS90cnVzdGVkLXNjaGVtYXMtcmVnaXN0cnkvdjMvc2NoZW1hcy96M01nVUZVa2I3MjJ1cTR4M2R2NXlBSm1uTm16REZlSzVVQzh4ODNRb2VMSk0iLCJ0eXBlIjoiRnVsbEpzb25TY2hlbWFWYWxpZGF0b3IyMDIxIn0sInRlcm1zT2ZVc2UiOnsiaWQiOiJodHRwczovL2FwaS1waWxvdC5lYnNpLmV1L3RydXN0ZWQtaXNzdWVycy1yZWdpc3RyeS92NS9pc3N1ZXJzL2RpZDplYnNpOnp4YVlhVXRiOHB2b0F0WU5XYktjdmVnL2F0dHJpYnV0ZXMvYjQwZmQ5YjQwNDQxOGE0NGQyZDk5MTEzNzdhMDMxMzBkZGU0NTBlYjU0NmM3NTViNWI4MGFjZDc4MjkwMmU2ZCIsInR5cGUiOiJJc3N1YW5jZUNlcnRpZmljYXRlIn19fQ.I8Im8azp0pSnM4z_jqGTTfYUg7K802POR2LTJftVfjYtMt82Cik2Z_KGOG7dHhx13R6VGVZKg9134ke1bKhtPw'
                signed-vp:
                  value:
                    output: 'eyJhbGciOiJFUzI1NksiLCJ0eXAiOiJKV1QiLCJraWQiOiJkaWQ6a2V5OnpCaEJMbVlteWlodG9tUmRKSk5FS3piUGo1MW80YTNHWUZlWm9SSFNBQktVd3FkamlRUFkyY3EzTFRHUnEzNlJob1pScWl4MWVxNHVBNDMzUUpheUhkVGk4c3htOHFkYkFiblR5Zzlkc1hDakQ4Tk43RXRjcjRmNTVtUmhuOVQxZDNkNkVjNkhndHBjVWZlbWI0WlZLU0NEYUJyQnlkc3JLQUIzVEtXTlhBa2duejFoc2VlcWY4WSN6QmhCTG1ZbXlpaHRvbVJkSkpORUt6YlBqNTFvNGEzR1lGZVpvUkhTQUJLVXdxZGppUVBZMmNxM0xUR1JxMzZSaG9aUnFpeDFlcTR1QTQzM1FKYXlIZFRpOHN4bThxZGJBYm5UeWc5ZHNYQ2pEOE5ON0V0Y3I0ZjU1bVJobjlUMWQzZDZFYzZIZ3RwY1VmZW1iNFpWS1NDRGFCckJ5ZHNyS0FCM1RLV05YQWtnbnoxaHNlZXFmOFkifQ.eyJqdGkiOiJ1cm46ZGlkOjEyMzQ1NiIsInN1YiI6ImRpZDprZXk6ekJoQkxtWW15aWh0b21SZEpKTkVLemJQajUxbzRhM0dZRmVab1JIU0FCS1V3cWRqaVFQWTJjcTNMVEdScTM2UmhvWlJxaXgxZXE0dUE0MzNRSmF5SGRUaThzeG04cWRiQWJuVHlnOWRzWENqRDhOTjdFdGNyNGY1NW1SaG45VDFkM2Q2RWM2SGd0cGNVZmVtYjRaVktTQ0RhQnJCeWRzcktBQjNUS1dOWEFrZ256MWhzZWVxZjhZIiwiaXNzIjoiZGlkOmtleTp6QmhCTG1ZbXlpaHRvbVJkSkpORUt6YlBqNTFvNGEzR1lGZVpvUkhTQUJLVXdxZGppUVBZMmNxM0xUR1JxMzZSaG9aUnFpeDFlcTR1QTQzM1FKYXlIZFRpOHN4bThxZGJBYm5UeWc5ZHNYQ2pEOE5ON0V0Y3I0ZjU1bVJobjlUMWQzZDZFYzZIZ3RwY1VmZW1iNFpWS1NDRGFCckJ5ZHNyS0FCM1RLV05YQWtnbnoxaHNlZXFmOFkiLCJpYXQiOjE3MDE3ODE5MTUsImF1ZCI6ImRpZDplYnNpOnp3TkFFNXhUaEJwbUdKVVdBWTIza2d4IiwidnAiOnsiaWQiOiJ1cm46ZGlkOjEyMzQ1NiIsIkBjb250ZXh0IjpbImh0dHBzOi8vd3d3LnczLm9yZy8yMDE4L2NyZWRlbnRpYWxzL3YxIl0sInR5cGUiOlsiVmVyaWZpYWJsZVByZXNlbnRhdGlvbiJdLCJob2xkZXIiOiJkaWQ6a2V5OnpCaEJMbVlteWlodG9tUmRKSk5FS3piUGo1MW80YTNHWUZlWm9SSFNBQktVd3FkamlRUFkyY3EzTFRHUnEzNlJob1pScWl4MWVxNHVBNDMzUUpheUhkVGk4c3htOHFkYkFiblR5Zzlkc1hDakQ4Tk43RXRjcjRmNTVtUmhuOVQxZDNkNkVjNkhndHBjVWZlbWI0WlZLU0NEYUJyQnlkc3JLQUIzVEtXTlhBa2duejFoc2VlcWY4WSIsInZlcmlmaWFibGVDcmVkZW50aWFsIjpbImV5SmhiR2NpT2lKRlV6STFOa3NpTENKMGVYQWlPaUpLVjFRaUxDSnJhV1FpT2lKa2FXUTZaV0p6YVRwNmVHRlpZVlYwWWpod2RtOUJkRmxPVjJKTFkzWmxaeU5EU0hoWmVrOXhkRE00VTNnMldVSm1VRmxvYVVWa1oyTjNlbGRyT1hSNU4yc3dURUpoTm1nM01HNWpJbjAuZXlKcWRHa2lPaUoxY200NmRYVnBaRG93TUROaE1XUmtPQzFoTldReUxUUXlaV1l0T0RFNE1pMWxPVEl4WXpCaE9XWXlZMlFpTENKemRXSWlPaUprYVdRNmEyVjVPbnBDYUVKTWJWbHRlV2xvZEc5dFVtUktTazVGUzNwaVVHbzFNVzgwWVROSFdVWmxXbTlTU0ZOQlFrdFZkM0ZrYW1sUlVGa3lZM0V6VEZSSFVuRXpObEpvYjFwU2NXbDRNV1Z4TkhWQk5ETXpVVXBoZVVoa1ZHazRjM2h0T0hGa1lrRmlibFI1Wnpsa2MxaERha1E0VGs0M1JYUmpjalJtTlRWdFVtaHVPVlF4WkROa05rVmpOa2huZEhCalZXWmxiV0kwV2xaTFUwTkVZVUp5UW5sa2MzSkxRVUl6VkV0WFRsaEJhMmR1ZWpGb2MyVmxjV1k0V1NJc0ltbHpjeUk2SW1ScFpEcGxZbk5wT25wNFlWbGhWWFJpT0hCMmIwRjBXVTVYWWt0amRtVm5JaXdpYm1KbUlqb3hOak0xTnpJME9EQXdMQ0psZUhBaU9qRTVOVE0zTmpNeU1EQXNJbWxoZENJNk1UVTVNamd6TlRFd05Dd2lkbU1pT25zaVFHTnZiblJsZUhRaU9sc2lhSFIwY0hNNkx5OTNkM2N1ZHpNdWIzSm5Mekl3TVRndlkzSmxaR1Z1ZEdsaGJITXZkakVpWFN3aWFXUWlPaUoxY200NmRYVnBaRG93TUROaE1XUmtPQzFoTldReUxUUXlaV1l0T0RFNE1pMWxPVEl4WXpCaE9XWXlZMlFpTENKMGVYQmxJanBiSWxabGNtbG1hV0ZpYkdWRGNtVmtaVzUwYVdGc0lpd2lWbVZ5YVdacFlXSnNaVUYwZEdWemRHRjBhVzl1SWwwc0ltbHpjM1ZsY2lJNkltUnBaRHBsWW5OcE9ucDRZVmxoVlhSaU9IQjJiMEYwV1U1WFlrdGpkbVZuSWl3aWFYTnpkV0Z1WTJWRVlYUmxJam9pTWpBeU1TMHhNUzB3TVZRd01Eb3dNRG93TUZvaUxDSjJZV3hwWkVaeWIyMGlPaUl5TURJeExURXhMVEF4VkRBd09qQXdPakF3V2lJc0luWmhiR2xrVlc1MGFXd2lPaUl5TURVd0xURXhMVEF4VkRBd09qQXdPakF3V2lJc0ltVjRjR2x5WVhScGIyNUVZWFJsSWpvaU1qQXpNUzB4TVMwek1GUXdNRG93TURvd01Gb2lMQ0pwYzNOMVpXUWlPaUl5TURJd0xUQTJMVEl5VkRFME9qRXhPalEwV2lJc0ltTnlaV1JsYm5ScFlXeFRkV0pxWldOMElqcDdJbWxrSWpvaVpHbGtPbXRsZVRwNlFtaENURzFaYlhscGFIUnZiVkprU2twT1JVdDZZbEJxTlRGdk5HRXpSMWxHWlZwdlVraFRRVUpMVlhkeFpHcHBVVkJaTW1OeE0weFVSMUp4TXpaU2FHOWFVbkZwZURGbGNUUjFRVFF6TTFGS1lYbElaRlJwT0hONGJUaHhaR0pCWW01VWVXYzVaSE5ZUTJwRU9FNU9OMFYwWTNJMFpqVTFiVkpvYmpsVU1XUXpaRFpGWXpaSVozUndZMVZtWlcxaU5GcFdTMU5EUkdGQ2NrSjVaSE55UzBGQ00xUkxWMDVZUVd0bmJub3hhSE5sWlhGbU9Ga2lmU3dpWTNKbFpHVnVkR2xoYkZOamFHVnRZU0k2ZXlKcFpDSTZJbWgwZEhCek9pOHZZWEJwTFhCcGJHOTBMbVZpYzJrdVpYVXZkSEoxYzNSbFpDMXpZMmhsYldGekxYSmxaMmx6ZEhKNUwzWXpMM05qYUdWdFlYTXZlak5OWjFWR1ZXdGlOekl5ZFhFMGVETmtkalY1UVVwdGJrNXRla1JHWlVzMVZVTTRlRGd6VVc5bFRFcE5JaXdpZEhsd1pTSTZJa1oxYkd4S2MyOXVVMk5vWlcxaFZtRnNhV1JoZEc5eU1qQXlNU0o5TENKMFpYSnRjMDltVlhObElqcDdJbWxrSWpvaWFIUjBjSE02THk5aGNHa3RjR2xzYjNRdVpXSnphUzVsZFM5MGNuVnpkR1ZrTFdsemMzVmxjbk10Y21WbmFYTjBjbmt2ZGpVdmFYTnpkV1Z5Y3k5a2FXUTZaV0p6YVRwNmVHRlpZVlYwWWpod2RtOUJkRmxPVjJKTFkzWmxaeTloZEhSeWFXSjFkR1Z6TDJJME1HWmtPV0kwTURRME1UaGhORFJrTW1RNU9URXhNemMzWVRBek1UTXdaR1JsTkRVd1pXSTFORFpqTnpVMVlqVmlPREJoWTJRM09ESTVNREpsTm1RaUxDSjBlWEJsSWpvaVNYTnpkV0Z1WTJWRFpYSjBhV1pwWTJGMFpTSjlmWDAuZktDUkVzd0c0M184NjJWcjhMM2xKT1JnRk56dk1aMmhSN3A5M2dmRWtoTS1xaElJbFNsUDBBY0FneTBjNnF1Ml8ydUFJQzdtT0duajlBWjNBdTJuTHciXX0sIm5iZiI6MTYzNTcyNDgwMCwiZXhwIjoxOTUzNzYzMjAwfQ.hp99g7ue2m0e2XAJd0Z707UGSpL2kVNGFFaK7CtzUuk0POMPUJBZ6vCKa4AxseQV6dDYSulZMTkOlMNAFdZnxw'
                signed-eth-trx:
                  value:
                    output: '0xf86a8301e240820834820834948390f8b75dfb727dd53c25a048dc4887cf4823308086aaaaaaaaaaaa26a0c836faebf670695d3ec6ade6625a3cedac9a5709501d7795d40aecfc66b43dbfa012bdad534e6d4284cf9308f30452da4b9f9d2204ac162b9e7437cf858da3fdd9'


components:
  schemas:
    SignatureRequestDto:
      type: object
      properties:
        did:
          type: string
          description: did of entity requesting the signature.
          example: "did:ebsi:zzcJJuM4Z4AUKdL8kdMEKNw"
        kid:
          type: string
          example: "did:ebsi:zzcJJuM4Z4AUKdL8kdMEKNw#k0G8kZ0UxsxGLYiiAhRUgtLtFzu-ZpbvzFtpJIH63ZI"
          description: Key Identifier.
        payload:
          type: object
          example: "{\"to\":\"0xf15e3682BCe7ADDefb2F1E1EAE3163448DB539f6\",\"from\":\"0x0ea5dc3dd725a4cd8b271739281e43af362511cf\",\"data\":\"0x1bef3e0c0000000000000000000000000000000000000000000000000000000000000060d2050ac521d196d986e630694e2dea8e31d25f1257035052d9de802ea813859f00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000206469643a656273693a7a6178655474315131366d584278777158614d3575457100000000000000000000000000000000000000000000000000000000000008ad65794a68624763694f694a46557a49314e694973496e523563434936496b705856434973496d74705a434936496d52705a44706c596e4e704f6e707153467071536a5254655464794f544a4365466836526b647a4e334645493151326156424e567931724f45383064586461615751794f55643354475574546d706e4e4442464e6d704f5644646f5a457877536a4e615532636966512e65794a7164476b694f694a32597a706c596e4e704f6d4e76626d5a76636d3168626d4e6c4932466d4f4467795a6a457a4c546c6c5a4445744e475534596931684d446b784c5467354d444a6a597a557a5932453159694973496e4e3159694936496d52705a44706c596e4e704f6e706865475655644446524d545a7457454a346433465959553031645556784969776961584e7a496a6f695a476c6b4f6d566963326b36656d7049576d704b4e464e354e3349354d6b4a345748704752334d33635551694c434a75596d59694f6a45334d5455324d7a67334d6a6373496d5634634349364d5463784e5463794e54457a4d69776961574630496a6f784e7a45314e6a4d344e7a49334c434a325979493665794a4159323975644756346443493657794a6f64485277637a6f764c336433647935334d793576636d63764d6a41784f43396a636d566b5a57353061574673637939324d534a644c434a705a434936496e5a6a4f6d566963326b36593239755a6d3979625746755932556a595759344f444a6d4d544d744f57566b4d5330305a5468694c5745774f5445744f446b774d6d4e6a4e544e6a595456694969776964486c775a53493657794a575a584a705a6d6c68596d786c51334a6c5a47567564476c6862434973496c5a6c636d6c6d61574669624756426448526c6333526864476c7662694973496c5a6c636d6c6d615746696247564259324e795a575270644746306157397549697769566d567961575a7059574a735a55466a59334a6c5a476c305958527062323555623046306447567a64434a644c434a7063334e315a5849694f694a6b615751365a574a7a61547036616b6861616b6f3055336b33636a6b79516e6859656b5a48637a647852434973496d6c7a63335668626d4e6c524746305a534936496a49774d6a51744d4455744d544e554d6a49364d5467364e4464614969776961584e7a6457566b496a6f694d6a41794e4330774e5330784d3151794d6a6f784f446f304e316f694c434a32595778705a455a79623230694f6949794d4449304c5441314c54457a564449794f6a45344f6a513357694973496d563463476c7959585270623235455958526c496a6f694d6a41794e4330774e5330784e4651794d6a6f784f446f314d6c6f694c434a6a636d566b5a5735306157467355335669616d566a6443493665794a705a434936496d52705a44706c596e4e704f6e706865475655644446524d545a7457454a346433465959553031645556784969776959574e6a636d566b6158526c5a455a76636949365733736963324e6f5a573168535751694f694a6f64485277637a6f764c3246776153316a6232356d62334a745957356a5a53356c596e4e704c6d56314c33527964584e305a57517463324e6f5a573168637931795a57647063335279655339324d79397a5932686c6257467a4c336f7a54576456526c5672596a63794d6e56784e48677a5a4859316555464b6257354f62587045526d564c4e5656444f4867344d3146765a55784b54534973496e52356347567a496a7062496c5a6c636d6c6d6157466962475644636d566b5a5735306157467349697769566d567961575a7059574a735a5546306447567a644746306157397549697769513152535a585a7659324669624755695853776962476c746158524b64584a706332527059335270623234694f694a6f64485277637a6f764c334231596d787059324630615739756379356c64584a76634745755a585576636d567a62335679593255765958563061473979615852354c324630645339475355346966563073496e4a6c63325679646d566b51585230636d6c696458526c535751694f694977654751794d44557759574d314d6a466b4d546b325a446b344e6d55324d7a41324f54526c4d6d526c5954686c4d7a466b4d6a566d4d5449314e7a417a4e5441314d6d51355a4755344d444a6c595467784d7a67314f5759696653776959334a6c5a47567564476c6862464e6a614756745953493665794a705a434936496d68306448427a4f693876595842704c574e76626d5a76636d3168626d4e6c4c6d566963326b755a58557664484a316333526c5a43317a5932686c6257467a4c584a6c5a326c7a64484a354c33597a4c334e6a6147567459584d76656a4e4e5a315647565774694e7a49796458453065444e6b646a563551557074626b3574656b52475a55733156554d346544677a5557396c5445704e4969776964486c775a534936496b5a316247784b6332397555324e6f5a573168566d467361575268644739794d6a41794d534a394c434a305a584a746330396d56584e6c496a7037496d6c6b496a6f696148523063484d364c79396863476b74593239755a6d397962574675593255755a574a7a6153356c64533930636e567a6447566b4c576c7a6333566c636e4d74636d566e61584e30636e6b76646a557661584e7a645756796379396b615751365a574a7a61547036616b6861616b6f3055336b33636a6b79516e6859656b5a48637a6478524339686448527961574a316447567a4c324a6a5a474932596d4d354e544a6a4f474d344f54646a5954466c4e6a41315a6d4e6c4d6a566d4f4449324d44526a4e7a5a6a4d545a6b4e4463354e7a63774d444530596a64694d6a5979596a6b7a597a41794e5441694c434a306558426c496a6f6953584e7a64574675593256445a584a3061575a70593246305a534a396658302e675f73666144474669756f6b3154776374456a427774534a3875682d78633957626f505235784e7a6e7141324b72716a554a5477654e4f4a48357032417230413836623767786e536932346848486666707554664c7700000000000000000000000000000000000000\",\"chainId\":6178,\"nonce\":1,\"value\":\"0x0\",\"gasLimit\":\"0x18f1a6\",\"gasValue\":\"0x0\"}"
          description: It is the payload to be signed. It can be a VerifiableCredential, VerifiablePresentation, EBSI ethereum transaction or generic payload
        expiresIn:
          type: number
          example: 10000
          description: It is used for limiting the time validity of Veriable Presentations and for setting exp field when signing generic payloads. It should be expressed in seconds (epoch unix timestamp)
        notBefore:
          type: number
          example: 1500
          description: It is used for Veriable Presentations for setting nbf field when signing generic payloads, to express that is valid from a certain time. It should be expressed in seconds (epoch unix timestamp)
      required:
        - did
        - kid
        - payload


    SignatureResponseDto:
      type: object
      properties:
        output:
          type: string
          description: signature output. It could a JWT (e.g. if input payload is VC or VP) but also a raw signature if kid are ES256K keys (transaction keys).
